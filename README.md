# ğŸ¥‡ Gold Quant Project

> ç°è´§é»„é‡‘ï¼ˆXAUUSDï¼‰é‡åŒ–äº¤æ˜“ç³»ç»Ÿ â€” å¤šçº§åˆ«å¤šç­–ç•¥é€šé“åˆ†æ + å†å²å›æµ‹

ä¸€ä¸ªåŸºäº Python çš„é»„é‡‘é‡åŒ–äº¤æ˜“é¡¹ç›®ï¼Œæ¶µç›–**æ•°æ®è·å–ã€æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ã€å¤šç­–ç•¥é€šé“åˆ†æã€å¤šå‘¨æœŸå›æµ‹ä»¥åŠå®ç›˜äº¤æ˜“æ¥å£**çš„å®Œæ•´é‡åŒ–äº¤æ˜“æµç¨‹ã€‚

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
Gold_Quant_Project/
â”œâ”€â”€ analysis/                    # é€šé“åˆ†ææ¨¡å—
â”‚   â”œâ”€â”€ channel_analyzer.py      # å¤šçº§åˆ«é€šé“åˆ†æå™¨ï¼ˆèšåˆå¤šç­–ç•¥ + å…±è¯†åˆ¤æ–­ï¼‰
â”‚   â””â”€â”€ strategies.py            # 4 ç§é€šé“åˆ†æç­–ç•¥ï¼ˆçº¿æ€§å›å½’/å¸ƒæ—å¸¦/å”å¥‡å®‰/è¶‹åŠ¿çº¿ï¼‰
â”œâ”€â”€ backtest/                    # å›æµ‹å¼•æ“
â”‚   â””â”€â”€ engine.py                # åŸºäº Backtrader çš„å›æµ‹å¼•æ“å°è£…
â”œâ”€â”€ data/                        # æ•°æ®å±‚
â”‚   â””â”€â”€ data_fetcher.py          # æ•°æ®è·å–å™¨ï¼ˆYFinance / MT5ï¼‰
â”œâ”€â”€ execution/                   # å®ç›˜æ‰§è¡Œ
â”‚   â””â”€â”€ mt5_trader.py            # MetaTrader5 äº¤æ˜“æ¥å£ï¼ˆä»… Windowsï¼‰
â”œâ”€â”€ factors/                     # å› å­è®¡ç®—
â”‚   â””â”€â”€ technical_indicators.py  # RSIã€MACDã€SMAã€ATR ç­‰æŠ€æœ¯æŒ‡æ ‡
â”œâ”€â”€ strategies/                  # äº¤æ˜“ç­–ç•¥
â”‚   â”œâ”€â”€ dual_ma_strategy.py      # åŒå‡çº¿ç­–ç•¥
â”‚   â”œâ”€â”€ enhanced_ma_strategy.py  # å¢å¼ºå‡çº¿ç­–ç•¥
â”‚   â”œâ”€â”€ swing_strategy.py        # æ³¢æ®µç­–ç•¥
â”‚   â”œâ”€â”€ optimized_swing.py       # ä¼˜åŒ–æ³¢æ®µç­–ç•¥ V1
â”‚   â””â”€â”€ optimized_swing_v2.py    # ä¼˜åŒ–æ³¢æ®µç­–ç•¥ V2
â”œâ”€â”€ output/                      # åˆ†æç»“æœè¾“å‡ºç›®å½•ï¼ˆ.gitignoreï¼‰
â”œâ”€â”€ main.py                      # é¡¹ç›®ä¸»å…¥å£
â”œâ”€â”€ run_channel_analysis.py      # å¤šçº§åˆ«é€šé“åˆ†æè„šæœ¬
â”œâ”€â”€ run_backtest.py              # åŸºç¡€å›æµ‹è„šæœ¬
â”œâ”€â”€ run_4h_backtest.py           # 4H å‘¨æœŸå›æµ‹
â”œâ”€â”€ run_daily_backtest.py        # æ—¥çº¿å›æµ‹
â”œâ”€â”€ run_long_backtest.py         # 25 å¹´é•¿æœŸå›æµ‹
â”œâ”€â”€ run_swing_backtest.py        # æ³¢æ®µç­–ç•¥å›æµ‹
â”œâ”€â”€ run_optimized_backtest.py    # ä¼˜åŒ–ç­–ç•¥å›æµ‹
â”œâ”€â”€ run_optimized_v2_backtest.py # ä¼˜åŒ–ç­–ç•¥ V2 å›æµ‹
â”œâ”€â”€ test_integration.py          # é›†æˆæµ‹è¯•
â”œâ”€â”€ requirements.txt             # Python ä¾èµ–
â””â”€â”€ .gitignore
```

---

## âš™ï¸ ç¯å¢ƒé…ç½®

### 1. åˆ›å»º Conda ç¯å¢ƒ

```bash
conda create -n gold_quant python=3.11 -y
conda activate gold_quant
```

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

**ä¾èµ–åˆ—è¡¨ï¼š**

| åŒ… | ç”¨é€” |
|---|---|
| `pandas` | æ•°æ®å¤„ç† |
| `numpy` | æ•°å€¼è®¡ç®— |
| `ta` | æŠ€æœ¯æŒ‡æ ‡è®¡ç®—ï¼ˆADXã€å¸ƒæ—å¸¦ã€å”å¥‡å®‰ç­‰ï¼‰ |
| `backtrader` | å›æµ‹å¼•æ“ |
| `yfinance` | Yahoo Finance æ•°æ®æº |
| `python-dotenv` | ç¯å¢ƒå˜é‡ç®¡ç† |

> **æ³¨æ„ï¼š** `MetaTrader5` ä»…æ”¯æŒ Windows å¹³å°ï¼ŒLinux ä¸‹ä½¿ç”¨ `yfinance` ä½œä¸ºæ•°æ®æºæ›¿ä»£ã€‚

### 3. ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

åˆ›å»º `.env` æ–‡ä»¶ç”¨äºå­˜æ”¾é…ç½®ï¼ˆå¦‚ MT5 è´¦å·ä¿¡æ¯ç­‰ï¼‰ï¼š

```bash
cp .env.example .env  # æŒ‰éœ€ç¼–è¾‘
```

---

## ğŸš€ åŠŸèƒ½ä»‹ç»

### ä¸€ã€å¤šçº§åˆ«å¤šç­–ç•¥é€šé“åˆ†æ

å¯¹é»„é‡‘ä»·æ ¼æ•°æ®åœ¨ **1H / 4H / æ—¥çº¿ / å‘¨çº¿** å››ä¸ªæ—¶é—´çº§åˆ«ä¸Šï¼Œä½¿ç”¨ **4 ç§ç‹¬ç«‹ç­–ç•¥** è¿›è¡Œé€šé“ç±»å‹åˆ¤å®šï¼Œå¹¶æ±‡æ€»**å¤šç­–ç•¥å…±è¯†**ã€‚

#### 4 ç§åˆ†æç­–ç•¥

| ç­–ç•¥ | å‚æ•°å | æ ¸å¿ƒæ–¹æ³• | é€‚åˆåœºæ™¯ |
|---|---|---|---|
| **çº¿æ€§å›å½’é€šé“** | `regression` | å›å½’æ–œç‡ + RÂ² + ADX | è¶‹åŠ¿å¼ºåº¦é‡åŒ– |
| **å¸ƒæ—å¸¦é€šé“** | `bollinger` | SMA(20) Â± 2Ïƒï¼Œå¸¦å®½ + %B | æ³¢åŠ¨æ€§ + è¶…ä¹°è¶…å– |
| **å”å¥‡å®‰é€šé“** | `donchian` | N å‘¨æœŸæœ€é«˜/æœ€ä½ä»· | çªç ´å‹äº¤æ˜“ |
| **é«˜ä½ç‚¹è¶‹åŠ¿çº¿** | `trendline` | å±€éƒ¨æå€¼è¿çº¿å›å½’ | æœ€è´´è¿‘æ‰‹åŠ¨ç”»çº¿ |

#### é€šé“ç±»å‹

| ç±»å‹ | åˆ¤å®šæ¡ä»¶ |
|---|---|
| ğŸ“ˆ ä¸Šæ¶¨é€šé“ | è¶‹åŠ¿æŒ‡æ ‡å‘ä¸Š + è¶‹åŠ¿å¼ºåº¦è¾¾æ ‡ |
| ğŸ“‰ ä¸‹è·Œé€šé“ | è¶‹åŠ¿æŒ‡æ ‡å‘ä¸‹ + è¶‹åŠ¿å¼ºåº¦è¾¾æ ‡ |
| â†”ï¸ æ¨ªç›˜éœ‡è¡ | è¶‹åŠ¿ä¸æ˜ç¡®æˆ–å¼ºåº¦ä¸è¶³ |
| ğŸ”„ è¶‹åŠ¿è½¬æ¢ä¸­ | æ–¹å‘åˆç°ä½†å¼ºåº¦æœªè¾¾æ ‡ |

#### ä½¿ç”¨æ–¹æ³•

```bash
# è¿è¡Œå…¨éƒ¨ç­–ç•¥
conda run -n gold_quant python run_channel_analysis.py

# æŒ‡å®šå•ä¸ªç­–ç•¥
conda run -n gold_quant python run_channel_analysis.py --strategy bollinger

# æŒ‡å®šå¤šä¸ªç­–ç•¥ï¼ˆé€—å·åˆ†éš”ï¼‰
conda run -n gold_quant python run_channel_analysis.py --strategy regression,donchian

# æŒ‡å®šå…¶ä»–å“ç§
conda run -n gold_quant python run_channel_analysis.py --symbol SI=F  # ç™½é“¶
```

#### è¾“å‡ºç¤ºä¾‹

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           XAUUSD å¤šçº§åˆ« Â· å¤šç­–ç•¥é€šé“åˆ†ææŠ¥å‘Š                    â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  ğŸ“Š 1Hï¼ˆæ—¥å†…ï¼‰                                                â•‘
â•‘     çº¿æ€§å›å½’     â†”ï¸  æ¨ªç›˜éœ‡è¡  ä½ç½®:59%  5298/5062              â•‘
â•‘     å¸ƒæ—å¸¦       â†”ï¸  æ¨ªç›˜éœ‡è¡  ä½ç½®:41%  5237/5176              â•‘
â•‘     å”å¥‡å®‰       â†”ï¸  æ¨ªç›˜éœ‡è¡  ä½ç½®:50%  5237/5163              â•‘
â•‘     é«˜ä½ç‚¹è¶‹åŠ¿çº¿  ğŸ”„ è¶‹åŠ¿è½¬æ¢ä¸­  ä½ç½®:68%  5225/5149              â•‘
â•‘     â”€â”€ å…±è¯†: ğŸ”„ åˆ†æ­§ (0æ¶¨/0è·Œ/4å…¶ä»–)                            â•‘
â•‘  ...                                                         â•‘
â•‘  ğŸ“Š å‘¨çº¿ï¼ˆé•¿æœŸï¼‰                                                â•‘
â•‘     çº¿æ€§å›å½’     ğŸ“ˆ ä¸Šæ¶¨é€šé“     å¸ƒæ—å¸¦  ğŸ“ˆ ä¸Šæ¶¨é€šé“               â•‘
â•‘     â”€â”€ å…±è¯†: ğŸ“ˆ åå¤š (3/4 çœ‹æ¶¨)                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

åˆ†æç»“æœä»¥å¸¦æ—¶é—´æˆ³çš„ JSON æ–‡ä»¶ä¿å­˜è‡³ `output/` ç›®å½•ï¼Œæ–‡ä»¶åæ ¼å¼ï¼š
```
output/channel_gcf_20260226_152500_all.json
```

---

### äºŒã€ç­–ç•¥å›æµ‹ç³»ç»Ÿ

åŸºäº **Backtrader** å¼•æ“ï¼Œæ”¯æŒå¤šç§äº¤æ˜“ç­–ç•¥åœ¨ä¸åŒæ—¶é—´å‘¨æœŸä¸Šçš„å†å²å›æµ‹ã€‚

#### å¯ç”¨ç­–ç•¥

| ç­–ç•¥ | è¯´æ˜ | å›æµ‹è„šæœ¬ |
|---|---|---|
| åŒå‡çº¿ç­–ç•¥ | SMA é‡‘å‰/æ­»å‰ | `run_backtest.py` |
| å¢å¼ºå‡çº¿ç­–ç•¥ | å‡çº¿ + åŠ¨é‡è¿‡æ»¤ | `run_optimized_backtest.py` |
| æ³¢æ®µç­–ç•¥ | è¶‹åŠ¿è·Ÿè¸ª + æ³¢æ®µæ•æ‰ | `run_swing_backtest.py` |
| ä¼˜åŒ–æ³¢æ®µ V2 | æ”¹è¿›æ­¢æŸ + åšç©º | `run_optimized_v2_backtest.py` |

#### æ”¯æŒçš„å›æµ‹å‘¨æœŸ

| è„šæœ¬ | å‘¨æœŸ | è¯´æ˜ |
|---|---|---|
| `run_backtest.py` | 1H | çŸ­å‘¨æœŸå¿«é€ŸéªŒè¯ |
| `run_4h_backtest.py` | 4H | ä¸­å‘¨æœŸæ³¢æ®µ |
| `run_daily_backtest.py` | æ—¥çº¿ | ä¸­é•¿æœŸè¶‹åŠ¿ |
| `run_long_backtest.py` | æ—¥çº¿ 25 å¹´ | è¶…é•¿æœŸç¨³å¥æ€§éªŒè¯ |

#### ä½¿ç”¨æ–¹æ³•

```bash
# è¿è¡Œå›æµ‹ï¼ˆä»¥æ³¢æ®µç­–ç•¥ä¸ºä¾‹ï¼‰
conda run -n gold_quant python run_swing_backtest.py

# æŸ¥çœ‹å›æµ‹ç»“æœ
cat output/gold_swing_backtest.json
```

å›æµ‹æŠ¥å‘ŠåŒ…å«ï¼šæ”¶ç›Šç‡ã€Sharpe æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€äº¤æ˜“æ¬¡æ•°ã€èƒœç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚

---

### ä¸‰ã€æ•°æ®è·å–

- **YFinance æ•°æ®æºï¼ˆé»˜è®¤ï¼‰**ï¼šé€šè¿‡ `yfinance` è·å– `GC=F`ï¼ˆé»„é‡‘æœŸè´§ï¼‰çš„ OHLCV æ•°æ®ï¼Œæ”¯æŒ 1m åˆ° 1wk å¤šç§å‘¨æœŸï¼Œè·¨å¹³å°å¯ç”¨
- **MT5 æ•°æ®æºï¼ˆå¯é€‰ï¼‰**ï¼šé€šè¿‡ MetaTrader5 API è·å– `XAUUSD` å®æ—¶æ•°æ®ï¼Œä»…æ”¯æŒ Windows

```python
from data.data_fetcher import YFinanceDataFetcher

fetcher = YFinanceDataFetcher(symbol="GC=F")
df = fetcher.fetch_ohlcv(period="1y", interval="1d")
```

---

### å››ã€æŠ€æœ¯æŒ‡æ ‡

`factors/technical_indicators.py` æä¾›ä¸€é”®è®¡ç®—å…¨éƒ¨æŠ€æœ¯æŒ‡æ ‡ï¼š

- **è¶‹åŠ¿æŒ‡æ ‡**ï¼šSMAï¼ˆå¤šå‘¨æœŸï¼‰ã€EMAã€MACD
- **åŠ¨é‡æŒ‡æ ‡**ï¼šRSI
- **æ³¢åŠ¨æ€§æŒ‡æ ‡**ï¼šATRã€å¸ƒæ—å¸¦
- **è¶‹åŠ¿å¼ºåº¦**ï¼šADX

---

### äº”ã€å®ç›˜äº¤æ˜“æ¥å£ï¼ˆä»… Windowsï¼‰

é€šè¿‡ `execution/mt5_trader.py` å¯¹æ¥ MetaTrader5ï¼Œæ”¯æŒï¼š

- è´¦æˆ·ä¿¡æ¯æŸ¥è¯¢
- å¸‚ä»·å• / æŒ‚å•ä¸‹å•
- æŒä»“ç®¡ç†ä¸å¹³ä»“
- æ­¢æŸ/æ­¢ç›ˆè®¾ç½®

> âš ï¸ **è­¦å‘Šï¼š** å®ç›˜äº¤æ˜“æ¶‰åŠçœŸå®èµ„é‡‘é£é™©ï¼Œä½¿ç”¨å‰è¯·åœ¨æ¨¡æ‹Ÿè´¦æˆ·ä¸­å……åˆ†æµ‹è¯•ã€‚

---

## ğŸ“Š å¿«é€Ÿå¼€å§‹

```bash
# 1. å…‹éš†é¡¹ç›®
git clone git@github.com:Br0wn2000/Gold_Quant_Project.git
cd Gold_Quant_Project

# 2. é…ç½®ç¯å¢ƒ
conda create -n gold_quant python=3.11 -y
conda activate gold_quant
pip install -r requirements.txt

# 3. è¿è¡Œé€šé“åˆ†æ
python run_channel_analysis.py

# 4. è¿è¡Œç­–ç•¥å›æµ‹
python run_swing_backtest.py
```

---

## ğŸ“„ License

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ç”¨é€”ï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚
